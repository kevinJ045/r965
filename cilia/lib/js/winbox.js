(function(){"use strict";var i=Math.max,j=Math.min;function o(d,a,b,c){d&&d.addEventListener(a,b,c||!1)}function a(d,a,b){var c=window;c&&c.removeEventListener(d,a,b||!1)}function c(b){b.stopPropagation(),b.cancelable&&b.preventDefault()}function k(d,a,b){b=""+b,d["_s_"+a]!==b&&(d.style.setProperty(a,b),d["_s_"+a]=b)}function m(f,o){if(!(this instanceof m))return new m(f);V||r();var w;if(f){if(o){var y=f;f=o}if("string"==typeof f)y=f;else{var z=f.id,d=f.index,g=f.root,l=f.template;y=y||f.title;var A=f.icon,F=f.mount,J=f.html,h=f.url,B=f.width,K=f.height,L=f.minwidth,P=f.minheight,R=f.maxwidth,aa=f.maxheight,ba=f.autosize,E=f.min,G=f.max,H=f.hidden,I=f.modal,ca=f.x||(I?"center":0),da=f.y||(I?"center":0),ea=f.top,fa=f.left,ga=f.bottom,ia=f.right,ja=f.background,ha=f.border,ka=f.header,U=f["class"],Z=f.onclose,la=f.onfocus,ma=f.onblur,na=f.onmove,oa=f.onresize,pa=f.onfullscreen,qa=f.onmaximize,ra=f.onminimize,sa=f.onrestore,ta=f.onhide,ua=f.onshow,va=f.onload}}this.g=(l||Q).cloneNode(!0),this.g.id=this.id=z||"winbox-"+ ++x,this.g.className="winbox"+(U?" "+("string"==typeof U?U:U.join(" ")):"")+(I?" modal":""),this.g.winbox=this,this.window=this.g,this.body=this.g.getElementsByClassName("wb-body")[0],this.h=ka||35,ja&&this.setBackground(ja),ha?k(this.body,"margin",ha+(isNaN(ha)?"":"px")):ha=0,ka&&(o=this.g.getElementsByClassName("wb-header")[0],k(o,"height",ka+"px"),k(o,"line-height",ka+"px"),k(this.body,"top",ka+"px")),y&&this.setTitle(y),A&&this.setIcon(A),F?this.mount(F):J?this.body.innerHTML=J:h&&this.setUrl(h,va),ea=ea?p(ea,$):0,ga=ga?p(ga,$):0,fa=fa?p(fa,W):0,ia=ia?p(ia,W):0,y=W-fa-ia,A=$-ea-ga,R=R?p(R,y):y,aa=aa?p(aa,A):A,L=L?p(L,R):150,P=P?p(P,aa):this.h,ba?((g||V).appendChild(this.body),B=i(j(this.body.clientWidth+2*ha+1,R),L),K=i(j(this.body.clientHeight+this.h+ha+1,aa),P),this.g.appendChild(this.body)):(B=B?p(B,R):0|i(R/2,L),K=K?p(K,aa):0|i(aa/2,P)),ca=ca?p(ca,y,B):fa,da=da?p(da,A,K):ea,this.x=ca,this.y=da,this.width=B,this.height=K,this.o=L,this.m=P,this.l=R,this.j=aa,this.top=ea,this.right=ia,this.bottom=ga,this.left=fa,this.index=d,this.focused=this.hidden=this.full=this.max=this.min=!1,this.onclose=Z,this.onfocus=la,this.onblur=ma,this.onmove=na,this.onresize=oa,this.onfullscreen=pa,this.onmaximize=qa,this.onminimize=ra,this.onrestore=sa,this.onhide=ta,this.onshow=ua,G?this.maximize():E?this.minimize():this.resize().move(),H?this.hide():(this.focus(),d||0===d)&&(this.index=d,k(this.g,"z-index",d),d>_&&(_=d)),s(this),(g||V).appendChild(this.g),(w=f.oncreate)&&w.call(this,f)}function p(d,e,b){return"string"==typeof d&&("center"===d?d=0|(e-b)/2:"right"===d||"bottom"===d?d=e-b:(b=parseFloat(d),d="%"===(""+b!==d&&d.substring((""+b).length))?0|e/100*b:b)),d}function r(){V=jQuery("#app-root").find('.main-viewel')[0],V[t="requestFullscreen"]||V[t="msRequestFullscreen"]||V[t="webkitRequestFullscreen"]||V[t="mozRequestFullscreen"]||(t=""),u=t&&t.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),o(window,"resize",function(){g(),d()}),g()}function s(d){e(d,"drag"),e(d,"n"),e(d,"s"),e(d,"w"),e(d,"e"),e(d,"nw"),e(d,"ne"),e(d,"se"),e(d,"sw"),o(d.g.getElementsByClassName("wb-min")[0],"click",function(a){c(a),d.min?d.focus().restore():d.blur().minimize()}),o(d.g.getElementsByClassName("wb-max")[0],"click",function(){d.max?d.restore():d.maximize()}),t?o(d.g.getElementsByClassName("wb-full")[0],"click",function(){d.fullscreen()}):d.addClass("no-full"),o(d.g.getElementsByClassName("wb-close")[0],"click",function(a){c(a),d.close()||(d=null)}),o(d.g,"click",function(){d.focus()})}function b(b){v.splice(v.indexOf(b),1),d(),b.removeClass("min"),b.min=!1,b.g.title=""}function d(){for(var f,h=v.length,a={},b={},c=0;c<h;c++)f=v[c],f=(f.left||f.right)+":"+(f.top||f.bottom),b[f]?b[f]++:(a[f]=0,b[f]=1);c=0;for(var i,k;c<h;c++)f=v[c],i=(f.left||f.right)+":"+(f.top||f.bottom),k=j((W-f.left-f.right)/b[i],250),f.resize(0|k+1,f.h,!0).move(0|f.left+a[i]*k,$-f.bottom-f.h,!0),a[i]++}function e(f,k){function b(a){if(c(a),f.focus(),"drag"===k){if(f.min)return void f.restore();var b=Date.now(),d=b-h;if(h=b,300>d)return void(f.max?f.restore():f.maximize())}f.max||f.min||(V.classList.add("wb-lock"),(g=a.touches)&&(g=g[0])?(a=g,o(window,"touchmove",m,w),o(window,"touchend",e,w)):(o(window,"mousemove",m),o(window,"mouseup",e)),p=a.pageX,r=a.pageY)}function m(a){c(a),g&&(a=a.touches[0]);var b=a.pageX;a=a.pageY;var d,e=b-p,l=a-r,m=f.width,n=f.height,o=f.x,q=f.y;if("drag"===k){f.x+=e,f.y+=l;var s=d=1}else{if("e"===k||"se"===k||"ne"===k){f.width+=e;var t=1}else("w"===k||"sw"===k||"nw"===k)&&(f.x+=e,f.width-=e,s=t=1);if("s"===k||"se"===k||"sw"===k){f.height+=l;var u=1}else("n"===k||"ne"===k||"nw"===k)&&(f.y+=l,f.height-=l,d=u=1)}t&&(f.width=i(j(f.width,f.l,W-f.x-f.right),f.o),t=f.width!==m),u&&(f.height=i(j(f.height,f.j,$-f.y-f.bottom),f.m),u=f.height!==n),(t||u)&&f.resize(),s&&(f.x=i(j(f.x,W-f.width-f.right),f.left),s=f.x!==o),d&&(f.y=i(j(f.y,$-f.height-f.bottom),f.top),d=f.y!==q),(s||d)&&f.move(),(t||s)&&(p=b),(u||d)&&(r=a)}function e(b){c(b),V.classList.remove("wb-lock"),g?(a("touchmove",m,w),a("touchend",e,w)):(a("mousemove",m),a("mouseup",e))}var d=f.g.getElementsByClassName("wb-"+k)[0];if(d){var g,p,r,h=0;o(d,"mousedown",b),o(d,"touchstart",b,w)}}function g(){var b=document.documentElement;W=b.clientWidth,$=b.clientHeight}function h(){if(n.full=!1,document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)return document[u](),!0}var l,Q=document.createElement("div");Q.innerHTML="<div class=wb-header><div class=wb-control><span class=wb-min></span><span class=wb-max></span><span class=wb-full></span><span class=wb-close></span></div><div class=wb-drag><div class=wb-icon></div><div class=wb-title></div></div></div><div class=wb-body></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>";var V,n,q,t,u,W,$,v=[],w={capture:!0,passive:!0},x=0,_=10;m["new"]=function(b){return new m(b)},l=m.prototype,l.mount=function(b){return this.unmount(),b.i||(b.i=b.parentNode),this.body.textContent="",this.body.appendChild(b),this},l.unmount=function(d){var a=this.body.firstChild;if(a){var b=d||a.i;b&&b.appendChild(a),a.i=d}return this},l.setTitle=function(d){var e=this.g.getElementsByClassName("wb-title")[0];d=this.title=d;var b=e.firstChild;return b?b.nodeValue=d:e.textContent=d,this},l.setIcon=function(c){var a=this.g.getElementsByClassName("wb-icon")[0];return a.innerHTML="<i class=\"mio\">"+c+"</i>",k(a,"display","inline-block"),this},l.setBackground=function(b){return k(this.g,"background",b),this},l.setUrl=function(d,a){var b=this.body.firstChild;return b&&"iframe"===b.tagName.toLowerCase()?b.src=d:(this.body.innerHTML="<iframe src=\""+d+"\"></iframe>",a&&(this.body.firstChild.onload=a)),this},l.focus=function(b){return!1===b?this.blur():(q!==this&&this.g&&(q&&q.blur(),k(this.g,"z-index",++_),this.index=_,this.addClass("focus"),q=this,this.focused=!0,this.onfocus&&this.onfocus()),this)},l.blur=function(b){return!1===b?this.focus():(q===this&&(this.removeClass("focus"),this.focused=!1,this.onblur&&this.onblur(),q=null),this)},l.hide=function(b){return!1===b?this.show():this.hidden?void 0:(this.onhide&&this.onhide(),this.hidden=!0,this.addClass("hide"))},l.show=function(b){return!1===b?this.hide():this.hidden?(this.onshow&&this.onshow(),this.hidden=!1,this.removeClass("hide")):void 0},l.minimize=function(b){return!1===b?this.restore():(n&&h(),this.max&&(this.removeClass("max"),this.max=!1),this.min||(v.push(this),d(),this.g.title=this.title,this.addClass("min"),this.min=!0,this.onminimize&&this.onminimize()),this)},l.restore=function(){return n&&h(),this.min&&(b(this),this.resize().move(),this.onrestore&&this.onrestore()),this.max&&(this.max=!1,this.removeClass("max").resize().move(),this.onrestore&&this.onrestore()),this},l.maximize=function(c){return!1===c?this.restore():(n&&h(),this.min&&b(this),this.max||(this.addClass("max").resize(W-this.left-this.right,$-this.top-this.bottom,!0).move(this.left,this.top,!0),this.max=!0,this.onmaximize&&this.onmaximize()),this)},l.fullscreen=function(c){if(this.min&&(b(this),this.resize().move()),!n||!h())this.body[t](),n=this,this.full=!0,this.onfullscreen&&this.onfullscreen();else if(!1===c)return this.restore();return this},l.close=function(c){return!!(this.onclose&&this.onclose(c))||void(this.min&&b(this),this.unmount(),this.g.remove(),this.g.textContent="",this.g=this.body=this.g.winbox=null,q===this&&(q=null))},l.move=function(d,e,f){return d||0===d?f||(this.x=d?d=p(d,W-this.left-this.right,this.width):0,this.y=e?e=p(e,$-this.top-this.bottom,this.height):0):(d=this.x,e=this.y),k(this.g,"left",d+"px"),k(this.g,"top",e+"px"),this.onmove&&this.onmove(d,e),this},l.resize=function(d,e,f){return d||0===d?f||(this.width=d?d=p(d,this.l):0,this.height=e?e=p(e,this.j):0,d=i(d,this.o),e=i(e,this.m)):(d=this.width,e=this.height),k(this.g,"width",d+"px"),k(this.g,"height",e+"px"),this.onresize&&this.onresize(d,e),this},l.addControl=function(f){var h=f["class"],b=f.image,c=f.click;f=f.index;var e=document.createElement("span"),d=this.g.getElementsByClassName("wb-control")[0],g=this;return h&&(e.className=h),b&&k(e,"background-image","url("+b+")"),c&&(e.onclick=function(a){c.call(this,a,g)}),d.insertBefore(e,d.childNodes[f||0]),this},l.removeControl=function(b){return(b=this.g.getElementsByClassName(b)[0])&&b.remove(),this},l.addClass=function(b){return this.g.classList.add(b),this},l.removeClass=function(b){return this.g.classList.remove(b),this},l.toggleClass=function(b){return this.g.classList.contains(b)?this.removeClass(b):this.addClass(b)},window.WinBox=m}).call(this);